{"version":3,"file":"index.js","sources":["../../../../src/DateVersion.js","../../../../src/SemanticVersion.js","../../../../src/ModifierVersion.js","../../../../src/Version.js","../../../../src/index.js"],"sourcesContent":["export default class DateVersion {\n  static tags = ['YYYY', 'YY', '0Y', 'MM', '0M', 'WW', '0W', 'DD', '0D']\n\n  reDigits = /[^0-9]/\n\n  constructor(obj, parentSeperator, isInitialVersion) {\n    this['YYYY'] = null\n    this['YY'] = null\n    this['0Y'] = null\n    this['MM'] = null\n    this['0M'] = null\n    this['WW'] = null\n    this['0W'] = null\n    this['DD'] = null\n    this['0D'] = null\n\n    this.hasChanged = false\n    this.isInitialVersion = isInitialVersion\n    this.parentSeperator = parentSeperator\n    this.props = []\n    this.date = new Date(Date.now())\n\n    this.parse(obj)\n  }\n\n  parse(obj) {\n    for (const prop in obj) {\n      if (!this.isInitialVersion && !this.isValid(prop, obj[prop])) {\n        throw new Error(`Calendar tag ${prop} has an invalid value \"${obj[prop]}\"`)\n      }\n\n      this[prop] = obj[prop]\n      this.props.push(prop)\n    }\n  }\n\n  inc(level) {\n    const prevValue = this.asString()\n\n    const yearstr = this.date.getUTCFullYear().toString()\n    this['YYYY'] = yearstr\n    this['YY'] = parseInt(yearstr.slice(2)).toString()\n    this['0Y'] = this['YY'].padStart(2, '0')\n\n    const monthstr = (this.date.getUTCMonth() + 1).toString()\n    this['MM'] = monthstr\n    this['0M'] = this['MM'].padStart(2, '0')\n\n    const weekstr = this.getUTCWeek(this.date).toString()\n    this['WW'] = weekstr\n    this['0W'] = this['WW'].padStart(2, '0')\n\n    const daystr = this.date.getUTCDate().toString()\n    this['DD'] = daystr\n    this['0D'] = this['DD'].padStart(2, '0')\n\n    const newValue = this.asString()\n\n    this.hasChanged = prevValue != newValue\n\n    return this\n  }\n\n  isValid(prop, v) {\n    if (!v || typeof v != 'string' || this.reDigits.test(v)) return false\n\n    switch (prop) {\n      case 'YYYY':\n        if (v.slice(0, 1) == '0') return false\n        return v.length === 4\n        break;\n\n      case 'YY':\n        if (v.slice(0, 1) == '0') return false\n        return v.length === 1 || v.length === 2 || v.length === 3\n        break;\n\n      case '0Y':\n        if ((v.length == 2 || v.length == 3) && v.slice(0, 1) == '0') return false\n        return v.length === 2 || v.length === 3\n        break;\n\n      case 'MM':\n        return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12].indexOf(Number(v)) !== -1\n        break;\n\n      case '0M':\n        return ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12']\n          .indexOf(v) !== -1\n        break;\n\n      case 'WW':\n        return Number(v) >= 1 && Number(v) <= 52\n        break;\n\n      case '0W':\n        if (v.length != 2) return false\n        return Number(v) >= 1 && Number(v) <= 52\n        break;\n\n      case 'DD':\n        return Number(v) >= 1 && Number(v) <= 31\n        break;\n\n      case '0D':\n        if (v.length != 2) return false\n        return Number(v) >= 1 && Number(v) <= 31\n        break;\n    }\n  }\n\n  asObject() {\n    return this.props.reduce((memo, prop) => {\n      memo[prop] = this[prop]\n      return memo\n    }, {})\n  }\n\n  asString() {\n    const result = []\n    for (const tag of this.constructor.tags) {\n      if (this.props.indexOf(tag) !== -1) result.push(this[tag])\n    }\n    return result.join(this.parentSeperator)\n  }\n\n  getUTCWeek(date) {\n    const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()))\n    const daynum = d.getUTCDay() || 7\n\n    d.setUTCDate(d.getUTCDate() + 4 - daynum)\n\n    const yearstart = new Date( Date.UTC(d.getUTCFullYear(), 0, 1) )\n\n    return Math.ceil((((d - yearstart) / 86400000) + 1)/7)\n  }\n}\n","export default class SemanticVersion {\n  static tags = ['MAJOR', 'MINOR', 'PATCH']\n\n  reDigits = /[^0-9]/\n\n  constructor(obj, parentSeperator, isInitialVersion) {\n    this.MAJOR = null\n    this.MINOR = null\n    this.PATCH = null\n\n    this.isInitialVersion = isInitialVersion\n    this.parentSeperator = parentSeperator\n    this.props = []\n\n    this.parse(obj)\n  }\n\n  parse(obj) {\n    for (const prop in obj) {\n      if (!this.isInitialVersion && !this.isValid(prop, obj[prop])) {\n        throw new Error(`Semantic tag ${prop} has an invalid value \"${obj[prop]}\"`)\n      }\n\n      this[prop] = obj[prop]\n      this.props.push(prop)\n    }\n  }\n\n  reset() {\n    this.props.map(prop => this[prop] = 0)\n  }\n\n  inc(level) {\n    if (this.props.indexOf(level) === -1) {\n      throw new Error(`[CALVER]: You have requested to increment \"${level}\" but your format doesn't have it.`)\n    }\n\n    if (level == 'MAJOR') {\n      this.MAJOR = (parseInt(this.MAJOR) + 1).toString()\n      if (this.props.indexOf('MINOR') !== -1) this.MINOR = '0'\n      if (this.props.indexOf('PATCH') !== -1) this.PATCH = '0'\n    }\n    \n    if (level == 'MINOR') {\n      this.MINOR = (parseInt(this.MINOR) + 1).toString()\n      if (this.props.indexOf('PATCH') !== -1) this.PATCH = '0'\n    }\n\n    if (level == 'PATCH') {\n      this.PATCH = (parseInt(this.PATCH) + 1).toString()\n    }\n\n    return this\n  }\n\n  isValid(prop, v) {\n    if (!v || typeof v != 'string' || this.reDigits.test(v)) return false\n    return true\n  }\n\n  asObject() {\n    return this.props.reduce((memo, prop) => {\n      memo[prop] = this[prop]\n      return memo\n    }, {})\n  }\n\n  asString() {\n    const result = []\n    for (const tag of this.constructor.tags) {\n      if (this.props.indexOf(tag) !== -1) result.push(this[tag])\n    }\n    return result.join(this.parentSeperator)\n  }\n}\n","export default class ModifierVersion {\n  static seperator = '-'\n  static tags = ['DEV', 'ALPHA', 'BETA', 'RC']\n\n  reDigits = /[^0-9\\-]/\n\n  constructor(obj, parentSeperator, isInitialVersion) {\n    this.DEV = null\n    this.ALPHA = null\n    this.BETA = null\n    this.RC = null\n\n    this.isInitialVersion = isInitialVersion\n    this.parentSeperator = parentSeperator\n    this.prop = null\n\n    this.parse(obj)\n  }\n\n  parse(obj) {\n    for (const prop in obj) {\n      if (!this.isInitialVersion && !this.isValid(prop, obj[prop])) {\n        throw new Error(`Modifier tag ${prop} has an invalid value \"${obj[prop]}\"`)\n      }\n\n      this.prop = prop\n      this[prop] = obj[prop]\n    }\n  }\n\n  inc(level) {\n    if (level != this.prop) {\n      throw new Error(`[CALVER]: You have requested to increment \"${level}\" but your format doesn't have it.`)\n    }\n\n    this[this.prop] = (parseInt(this[this.prop]) + 1).toString()\n\n    return this\n  }\n\n  isValid(prop, v) {\n    if (!v || typeof v != 'string' || this.reDigits.test(v)) return false\n    if (v.indexOf('-') !== -1 && v != '-1') return false\n    return true\n  }\n\n  asObject() {\n    const result = {}\n    result[this.prop] = this[this.prop]\n    return result\n  }\n\n  asString() {\n    return `${this.constructor.seperator}${this.prop}${this.parentSeperator}${this[this.prop]}`\n  }\n}\n","import DateVersion from './DateVersion.js'\nimport SemanticVersion from './SemanticVersion.js'\nimport ModifierVersion from './ModifierVersion.js'\n\nexport default class Version {\n  constructor(version, seperator) {\n    this.seperator = seperator\n    this.versionStringHasModifier = version.versionStringHasModifier\n    this.isInitialVersion = version.isInitialVersion\n    this.isCalendarLeading = version.isCalendarLeading\n    this.datever = null\n    this.semanticver = null\n    this.modifierver = null\n\n    this.parse(version)\n  }\n\n  parse(version) {\n    if (Object.keys(version.calendar).length > 0) {\n      this.datever = new DateVersion(version.calendar, this.seperator, this.isInitialVersion)\n    }\n\n    if (Object.keys(version.semantic).length > 0) {\n      this.semanticver = new SemanticVersion(version.semantic, this.seperator, this.isInitialVersion)\n    }\n\n    if (Object.keys(version.modifier).length > 0) {\n      this.modifierver = new ModifierVersion(version.modifier, this.seperator, this.isInitialVersion)\n    }\n  }\n\n  inc(levels) {\n    const l = levels[0]\n\n    const removeModifier = levels.length === 1 \n      && ['MAJOR', 'MINOR', 'PATCH', 'CALENDAR'].indexOf(l) !== -1 \n      && this.versionStringHasModifier\n    if (removeModifier) {\n      this.modifierver = null\n\n      return this\n    }\n\n    if (l == 'CALENDAR') this.datever.inc(l)\n    if (SemanticVersion.tags.indexOf(l) !== -1) this.semanticver.inc(l)\n    if (ModifierVersion.tags.indexOf(l) !== -1) this.modifierver.inc(l)\n\n    if (levels.length > 1) {\n      const l2 = levels[1]\n\n      if (ModifierVersion.tags.indexOf(l2) !== -1 && ModifierVersion.tags.indexOf(l) === -1) {\n        this.modifierver.inc(l2)\n      }\n      else if (SemanticVersion.tags.indexOf(l2) !== -1) {\n        if (this.isCalendarLeading && this.datever.hasChanged) this.semanticver.reset()\n        else this.semanticver.inc(l2)\n      }\n      else {\n        throw new Error(`The second tag of the level should be either modifier or semantic tag. You specified \"${l2}\" as the second tag and \"${l}\" as the first tag.`)\n      }\n    }\n\n    return this\n  }\n\n  asObject() {\n    const result = {\n      calendar: {},\n      semantic: {},\n      modifier: {}\n    }\n\n    if (this.datever) result.calendar = this.datever.asObject()\n    if (this.semanticver) result.semantic = this.semanticver.asObject()\n    if (this.modifierver) result.modifier = this.modifierver.asObject()\n\n    return result\n  }\n}\n","import DateVersion from './DateVersion.js'\nimport SemanticVersion from './SemanticVersion.js'\nimport ModifierVersion from './ModifierVersion.js'\nimport Version from './Version.js'\n\nclass Calver {\n  constructor() {\n    this.seperator = '.'\n    this.levels = ['CALENDAR', 'MAJOR', 'MINOR', 'PATCH', ...ModifierVersion.tags]\n  }\n\n  inc(format, version, levels) {\n    levels = this.validateLevels(levels)\n    format = this.validateFormat(format, levels)\n    const parsedVersion = this.parseVersion(version, format, levels)\n\n    const obj = (new Version(parsedVersion, this.seperator)).inc(levels).asObject()\n\n    const result = this.asString(format, obj)\n\n    if (version == result) {\n      throw new Error('No change happened in the version.')\n    }\n\n    return result\n  }\n\n  isValid(format, version) {\n    if (!version) return false\n\n    try {\n      format = this.validateFormat(format, [])\n      version = this.parseVersion(version, format, [])\n\n      new Version(version, this.seperator)\n\n      return true\n    } catch (e) {\n      return false\n    }\n  }\n\n  getTagType(tag) {\n    tag = tag.toUpperCase()\n\n    if (DateVersion.tags.indexOf(tag) !== -1) return 'calendar'\n    if (SemanticVersion.tags.indexOf(tag) !== -1) return 'semantic'\n    if (ModifierVersion.tags.indexOf(tag) !== -1) return 'modifier'\n    \n    return undefined;\n  }\n\n  asString(format, obj) {\n    const result = []\n\n    for (const tag of format.sorted) {\n      if (DateVersion.tags.indexOf(tag) !== -1) {\n        result.push(obj.calendar[tag])\n      }\n      if (SemanticVersion.tags.indexOf(tag) !== -1) {\n        result.push(obj.semantic[tag])\n      }\n      if (ModifierVersion.tags.indexOf(tag) !== -1 && obj.modifier) {\n        result.push(ModifierVersion.seperator + tag.toLowerCase() + this.seperator + obj.modifier[tag])\n      }\n    }\n\n    return result\n      .join(this.seperator)\n      .replace(this.seperator + ModifierVersion.seperator, ModifierVersion.seperator)\n  }\n\n  parseVersion(version, format, levels) {\n    const map = {\n      isCalendarLeading: format.isCalendarLeading,\n      isInitialVersion: !version,\n      versionStringHasModifier: /(dev|DEV|alpha|ALPHA|beta|BETA|rc|RC)/.test(version),\n      sorted: {},\n      calendar: {},\n      semantic: {},\n      modifier: {}\n    }\n\n    let startIndex=0, endIndex=0\n    for (const tag of format.sorted) {\n      endIndex = version.indexOf(this.seperator, startIndex+1)\n      if (endIndex === -1) endIndex = undefined\n\n      let value = version.slice(startIndex, endIndex)\n\n      if (value.indexOf(ModifierVersion.seperator) !== -1) {\n        endIndex = version.indexOf(ModifierVersion.seperator, startIndex+1)\n        value = version.slice(startIndex, endIndex)\n      }\n\n      if (ModifierVersion.tags.indexOf(value.toUpperCase()) !== -1) {\n        if (value.toUpperCase() != tag) value = '-1'\n        else value = version.slice(startIndex + value.length + 1)\n      }\n\n      if (isNaN(startIndex)) {\n        value = ModifierVersion.tags.indexOf(tag) !== -1 ? '-1' : '0'\n      }\n\n      if (value == '') {\n        value = '0'\n      }\n\n      map.sorted[tag] = value\n      if (format.calendar.indexOf(tag) !== -1) map.calendar[tag] = value\n      if (format.semantic.indexOf(tag) !== -1) map.semantic[tag] = value\n      if (format.modifier.indexOf(tag) !== -1) map.modifier[tag] = value\n\n      startIndex = endIndex + 1\n    }\n\n    return map\n  }\n\n  validateFormat(format, levels) {\n    const result = {\n      sorted: [],\n      calendar: [],\n      semantic: [],\n      modifier: []\n    }\n\n    const tags = format.toUpperCase().split(this.seperator)\n\n    for (const tag of tags) {\n      if (DateVersion.tags.indexOf(tag) !== -1) result.calendar.push(tag)\n      else if (SemanticVersion.tags.indexOf(tag) !== -1) result.semantic.push(tag)\n      else throw new Error(`[CALVER]: Invalid format tag \"${tag}\".`)\n\n      result.sorted.push(tag)\n    }\n\n    for (const level of levels) {\n      if (ModifierVersion.tags.indexOf(level) !== -1) {\n        result.modifier.push(level)\n        result.sorted.push(level)\n      }\n    }\n\n    result.isCalendarLeading = DateVersion.tags.indexOf(result.sorted[0]) !== -1\n\n    return result\n  }\n\n  validateLevels(levels) {\n    const result = []\n    const arr = levels.split('.')\n\n    for (const level of arr) {\n      const formatted = level.toUpperCase()\n      if (this.levels.indexOf(formatted) !== -1) {\n        result.push(formatted)\n      }\n      else {\n        throw new Error(`[CALVER]: Invalid level \"${level}\".`)\n      }\n    }\n\n    return result\n  }\n}\n\nexport default new Calver()\n"],"names":["DateVersion","tags","reDigits","constructor","obj","parentSeperator","isInitialVersion","hasChanged","props","date","Date","now","parse","prop","isValid","Error","push","inc","level","prevValue","asString","yearstr","getUTCFullYear","toString","parseInt","slice","padStart","monthstr","getUTCMonth","weekstr","getUTCWeek","daystr","getUTCDate","newValue","v","test","length","indexOf","Number","asObject","reduce","memo","result","tag","join","d","UTC","getFullYear","getMonth","getDate","daynum","getUTCDay","setUTCDate","yearstart","Math","ceil","SemanticVersion","MAJOR","MINOR","PATCH","reset","map","ModifierVersion","seperator","DEV","ALPHA","BETA","RC","Version","version","versionStringHasModifier","isCalendarLeading","datever","semanticver","modifierver","Object","keys","calendar","semantic","modifier","levels","l","removeModifier","l2","Calver","format","validateLevels","validateFormat","parsedVersion","parseVersion","e","getTagType","toUpperCase","undefined","sorted","toLowerCase","replace","startIndex","endIndex","value","isNaN","split","arr","formatted"],"mappings":"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"}